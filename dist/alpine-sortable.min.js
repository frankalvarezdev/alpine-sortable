"use strict";(()=>{var w=d=>{let t=d.reactive({selecteIndex:null,clonedDragElement:null,originalDragElement:null});d.directive("sortable",(x,{expression:c,value:L},{evaluate:u,evaluateLater:T,effect:y,cleanup:I})=>{let n=x,s=u(L),m=(e,l)=>{let r=s[e];s[e]=s[l],s[l]=r},o=u(c),H=T(c);n.setAttribute("draggable","true");let M=e=>{n.setAttribute("data-draggable-index",String(e))},g=()=>{t.selecteIndex=o},E=e=>{e.preventDefault()},p=()=>{t.selecteIndex!==null&&m(t.selecteIndex,o)};n.addEventListener("dragstart",g),n.addEventListener("dragover",E),n.addEventListener("drop",p);let v=()=>{t.selecteIndex=o,t.originalDragElement=n;let e=n.cloneNode(!0);e.setAttribute("x-ignore",""),e.style.position="fixed",e.style.boxSizing="border-box",e.style.zIndex="999999",e.style.opacity="0",e.style.pointerEvents="none",e.style.transition="none",e.style.width=n.offsetWidth*.8+"px",e.style.height=n.offsetHeight*.8+"px",document.body.appendChild(e),t.clonedDragElement=e},f=e=>{if(e.preventDefault(),!t.clonedDragElement)return;let l=e.changedTouches[0],r={left:l.clientX-t.clonedDragElement.offsetWidth/2+"px",top:l.clientY-t.clonedDragElement.offsetHeight/2+"px"};t.clonedDragElement.style.left=r.left,t.clonedDragElement.style.top=r.top,t.clonedDragElement.style.opacity="0.5"},b=e=>{t.clonedDragElement&&(t.clonedDragElement.remove(),t.clonedDragElement=null);let l=document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY);if(!l||t.selecteIndex===null)return;let r=a=>a?a.getAttribute("draggable")==="true":!1,i=null;for(let a=0;a<4;a++){if(r(l)){i=l;break}if(!l.parentElement)break;l=l.parentElement}if(!i||i===t.originalDragElement)return;let h=i.getAttribute("data-draggable-index");if(!h===null)return;let A=Number(h);m(t.selecteIndex,A),t.originalDragElement=null,t.clonedDragElement=null};n.addEventListener("touchstart",v),n.addEventListener("touchmove",f),n.addEventListener("touchend",b),y(()=>{H(e=>{o=e,M(o)})}),I(()=>{n.removeEventListener("dragstart",g),n.removeEventListener("dragover",E),n.removeEventListener("drop",p),n.removeEventListener("touchstart",v),n.removeEventListener("touchmove",f),n.removeEventListener("touchend",b)})})},D=w;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(D)});})();

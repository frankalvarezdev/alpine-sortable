"use strict";(()=>{var S=d=>{let t=d.reactive({selecteIndex:null,clonedDragElement:null,originalDragElement:null});d.directive("sortable",(y,{expression:c,value:u},{evaluate:m,evaluateLater:g,effect:T,cleanup:I})=>{let n=y,o=m(u),H=g(u),E=(e,l)=>{let r=o[e];o[e]=o[l],o[l]=r},a=m(c),M=g(c);n.setAttribute("draggable","true");let A=e=>{n.setAttribute("data-draggable-index",String(e))},p=()=>{t.selecteIndex=a},f=e=>{e.preventDefault()},b=()=>{t.selecteIndex!==null&&E(t.selecteIndex,a)};n.addEventListener("dragstart",p),n.addEventListener("dragover",f),n.addEventListener("drop",b);let v=()=>{t.selecteIndex=a,t.originalDragElement=n;let e=n.cloneNode(!0);e.setAttribute("x-ignore",""),e.style.position="fixed",e.style.boxSizing="border-box",e.style.zIndex="999999",e.style.opacity="0",e.style.pointerEvents="none",e.style.transition="none",e.style.width=n.offsetWidth*.8+"px",e.style.height=n.offsetHeight*.8+"px",document.body.appendChild(e),t.clonedDragElement=e},h=e=>{if(e.preventDefault(),!t.clonedDragElement)return;let l=e.changedTouches[0],r={left:l.clientX-t.clonedDragElement.offsetWidth/2+"px",top:l.clientY-t.clonedDragElement.offsetHeight/2+"px"};t.clonedDragElement.style.left=r.left,t.clonedDragElement.style.top=r.top,t.clonedDragElement.style.opacity="0.5"},D=e=>{t.clonedDragElement&&(t.clonedDragElement.remove(),t.clonedDragElement=null);let l=document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY);if(!l||t.selecteIndex===null)return;let r=s=>s?s.getAttribute("draggable")==="true":!1,i=null;for(let s=0;s<4;s++){if(r(l)){i=l;break}if(!l.parentElement)break;l=l.parentElement}if(!i||i===t.originalDragElement)return;let x=i.getAttribute("data-draggable-index");if(!x===null)return;let w=Number(x);E(t.selecteIndex,w),t.originalDragElement=null,t.clonedDragElement=null};n.addEventListener("touchstart",v),n.addEventListener("touchmove",h),n.addEventListener("touchend",D),T(()=>{M(e=>{a=e,A(a)}),H(e=>{o=e})}),I(()=>{n.removeEventListener("dragstart",p),n.removeEventListener("dragover",f),n.removeEventListener("drop",b),n.removeEventListener("touchstart",v),n.removeEventListener("touchmove",h),n.removeEventListener("touchend",D)})})},L=S;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(L)});})();
